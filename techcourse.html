<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MBTECH Tutors</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
<style>
body{font-family:'Plus Jakarta Sans',sans-serif;background:#f8fafc}
.form-input{width:100%;background:#f8fafc;border:1px solid #e2e8f0;padding:1rem;border-radius:.75rem}
</style>
</head>

<body class="p-4">

<div class="max-w-3xl mx-auto space-y-10">

<!-- ================= BOOKING ================= -->
<div class="bg-white p-8 rounded-3xl shadow-xl border">
<h2 class="text-2xl font-black mb-6">Student Registration</h2>

<form id="bookingForm" class="space-y-4">
<input name="studentName" required placeholder="Student Name" class="form-input">
<input type="number" name="studentAge" required placeholder="Age" class="form-input">
<input type="email" name="studentEmail" placeholder="Email" class="form-input">
<input name="studentPhone" required placeholder="Phone" class="form-input">

<select name="level" class="form-input">
<option>JSS</option><option>SSS</option><option>WAEC</option><option>JAMB</option>
</select>

<select name="curriculum" class="form-input">
<option>West African</option><option>British</option>
</select>

<div>
<label><input type="checkbox" name="subjects" value="Mathematics"> Math</label>
<label><input type="checkbox" name="subjects" value="English"> English</label>
<label><input type="checkbox" name="subjects" value="Physics"> Physics</label>
</div>

<div>
<label><input type="radio" name="platform" value="whatsapp" checked> WhatsApp</label>
<label><input type="radio" name="platform" value="telegram"> Telegram</label>
<label><input type="radio" name="platform" value="gmeet"> Google Meet</label>
</div>

<button class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold">Register</button>
</form>
</div>


<!-- ================= HOMEWORK ================= -->
<div class="bg-white p-8 rounded-3xl shadow-xl border">
<h2 class="text-2xl font-black mb-6">Homework Help</h2>

<form id="homeworkForm" class="space-y-4">
<input name="hw_name" required placeholder="Your Name" class="form-input">
<input name="hw_phone" required placeholder="Phone" class="form-input">
<textarea name="hw_details" placeholder="Assignment description..." class="form-input"></textarea>
<input type="file" id="hw_file" accept="image/*,.pdf,.doc,.docx" class="form-input">
<button class="w-full bg-orange-600 text-white py-3 rounded-xl font-bold">Submit Homework</button>
</form>
</div>

</div>

<script>
const WEBAPP_URL="https://script.google.com/macros/s/AKfycbxJX_QbzVLial6YeiRxes9DmmPlD-7ZADQFGswsWwB_VpvCozJprfRXmHPSu9iFZys/exec";

// ===== BOOKING =====
document.getElementById("bookingForm").addEventListener("submit",async e=>{
e.preventDefault();
const f=new FormData(e.target);
const subjects=[...document.querySelectorAll('input[name="subjects"]:checked')].map(x=>x.value).join(", ");

const payload={
name:f.get("studentName"),
age:f.get("studentAge"),
email:f.get("studentEmail"),
phone:f.get("studentPhone"),
level:f.get("level"),
curriculum:f.get("curriculum"),
subjects:subjects,
platform:f.get("platform")
};

await fetch(WEBAPP_URL,{method:"POST",body:JSON.stringify(payload)});

if(payload.platform==="telegram")window.location.href="https://t.me/mbtech_connect/166";
if(payload.platform==="whatsapp")window.location.href="https://wa.me/2348109006065";

if(payload.platform==="gmeet"){
const subject=encodeURIComponent("New Student Registration");
const body=encodeURIComponent(
`Name: ${payload.name}
Age: ${payload.age}
Phone: ${payload.phone}
Email: ${payload.email}
Level: ${payload.level}
Subjects: ${payload.subjects}`);
window.location.href=`mailto:mesobest.technology.org@gmail.com?subject=${subject}&body=${body}`;
}

alert("Registration saved!");
e.target.reset();
});

// ===== HOMEWORK =====
document.getElementById("homeworkForm").addEventListener("submit",async e=>{
e.preventDefault();
const file=document.getElementById("hw_file").files[0];

if(file){
const reader=new FileReader();
reader.onload=async()=>{
const base64=reader.result.split(',')[1];
await sendHomework({name:file.name,data:base64});
};
reader.readAsDataURL(file);
}else{await sendHomework(null);}
});

async function sendHomework(fileData){
const payload={
hw_name:document.querySelector('[name="hw_name"]').value,
hw_phone:document.querySelector('[name="hw_phone"]').value,
hw_details:document.querySelector('[name="hw_details"]').value,
file:fileData
};
await fetch(WEBAPP_URL,{method:"POST",body:JSON.stringify(payload)});
alert("Homework submitted!");
}
</script>

</body>
</html>
